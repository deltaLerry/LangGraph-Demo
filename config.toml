[app]
# 默认点子（CLI/环境变量可覆盖）
idea = "一个普通人意外进入修仙世界，被迫卷入宗门纷争"

# 输出根目录
output_base = "outputs"

# 阶段：用于归档/持久化记录（例如 stage1 / stage2 / stage3）
stage = "stage1"

# 写作/审核时注入“最近章节记忆”的数量（只注入梗概 summary）
memory_recent_k = 3

# 运行模式：
# - "template"：强制模板（用于纯工作流验证，不走LLM）
# - "llm"：强制LLM（未配置LLM时将报错）
# - "auto"：有LLM就用LLM，否则用模板（默认）
llm_mode = "auto"

# 是否开启 debug：输出 debug.jsonl 运行日志 + call_graph.md 节点调用图
debug = true

[generation]
# 目标字数（每章）
target_words = 800

# 章节数
chapters = 1

# 每章最多返工次数（不含首稿）
max_rewrites = 2

[planner]
# 策划任务槽位：根据“当前启用的上游 agent”决定拆分哪些任务、派给谁。
# 你后续进入 3.0（并行架构师/角色导演/编剧）时，就在这里增删/调整任务即可。
tasks = [
  { task_name = "世界观设定", executor = "架构师", hint = "构建世界背景、规则、势力与核心冲突，要求可用于写作约束（Canon）" },
  { task_name = "核心角色", executor = "角色导演", hint = "产出主要人物卡：性格、动机、能力、禁忌、关系网" },
  { task_name = "主线脉络", executor = "编剧", hint = "给出主线推进的关键节点与前期节奏安排" },
  { task_name = "开篇基调", executor = "策划", hint = "明确文风/视角/节奏/情绪基调，给写手可执行的风格约束" },
]

[llm]
# DeepSeek（OpenAI兼容）
base_url = "https://api.deepseek.com/v1"
api_key = "sk-REPLACE_ME"
model = "deepseek-chat"
temperature = 0.7

# DeepSeek/OpenAI兼容额外参数（按需配置）
# max_tokens = 2048
# top_p = 0.9
# presence_penalty = 0.0
# frequency_penalty = 0.0
# timeout = 60